<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title></title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
	<canvas id="canvas"></canvas>
</body>
<style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }
    body {
        background: black;
        display: flex;
        width: 100%;
        height: 100vh;
        justify-content: center;
        align-items: center;
    }
</style>
<script>
    var canvas = document.getElementById("canvas")
    canvas.width = window.innerWidth
    canvas.height = 200
    var ctx = canvas.getContext("2d")
    var cal = 200
    var particlesArray = []
    class Particle {
        constructor() {
            this.x = 0
            this.vx = Math.random() * 2 + 1
            this.y = (Math.random() * (canvas.height - 60) + 30) | 0
            this.points = []
            this.color = "hsl(" + (Math.random() * 360 | 0) + "deg,50%,50%)"
            for (var i = 0; i < (canvas.width / cal | 0) + 2; i++) {
                this.points.push(Math.random())
            }
        }
        update() {
            this.x += this.vx
        }
        draw() {
            ctx.fillStyle = this.color
            ctx.fillRect(this.x, check(this.points, this.x) * 0.5 * canvas.height + this.y, 2, 2)
        }
    }

    function check(points, x) {
        var p0 = (x / cal) | 0
        var p1 = p0 + 1
        var vx1 = (x - p0 * cal) / cal * points[p0]
        var vx2 = (x - p1 * cal) / cal * points[p1]
        var tx = (x - p0 * cal) / cal
        var tx = 6 * Math.pow(tx, 5) - 15 * Math.pow(tx, 4) + 10 * Math.pow(tx, 3)
        var y = (1 - tx) * vx1 + tx * vx2
        return (y)
    }

    function draw() {
        ctx.fillStyle = "rgba(0,0,0,0.1)"
        ctx.fillRect(0, 0, canvas.width, canvas.height)
        for (var i = 0; i < particlesArray.length; i++) {
            var particle = particlesArray[i]
            particle.update()
            particle.draw()
            if (particle.x > canvas.width) {
                particlesArray.splice(i, 1)
            }
        }
        if (particlesArray.length < 200) {
            particlesArray.push(new Particle)
        }
    }
    setInterval(draw, 10);
</script>
</html>
